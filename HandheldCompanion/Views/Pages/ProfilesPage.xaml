<Page
    x:Class="HandheldCompanion.Views.Pages.ProfilesPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:ikw="http://schemas.inkore.net/lib/ui/wpf"
    xmlns:l="clr-namespace:HandheldCompanion.Localization"
    xmlns:managers="clr-namespace:HandheldCompanion.Managers;assembly=HandheldCompanion"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:resx="clr-namespace:HandheldCompanion.Properties"
    xmlns:ui="http://schemas.inkore.net/lib/ui/wpf/modern"
    xmlns:viewmodels="clr-namespace:HandheldCompanion.ViewModels"
    Name="Profiles"
    Title="{l:Static resx:Resources.ProfilesPage_Profiles}"
    d:Background="White"
    d:DataContext="{d:DesignInstance Type=viewmodels:ProfilesPageViewModel}"
    d:DesignHeight="4000"
    d:DesignWidth="1000"
    KeepAlive="True"
    Loaded="Page_Loaded"
    mc:Ignorable="d">

    <Grid Name="MainGrid" Margin="20">
        <Image
            HorizontalAlignment="Right"
            VerticalAlignment="Top"
            Opacity="0"
            Source="{Binding Artwork, Mode=OneWay, UpdateSourceTrigger=PropertyChanged, NotifyOnTargetUpdated=True}"
            Stretch="None">
            <Image.Triggers>
                <EventTrigger RoutedEvent="Binding.TargetUpdated">
                    <BeginStoryboard>
                        <Storyboard>
                            <!--  fade in from 0→1 in 300ms  -->
                            <DoubleAnimation
                                Storyboard.TargetProperty="Opacity"
                                From="0"
                                To="0.6"
                                Duration="0:0:0.3" />
                        </Storyboard>
                    </BeginStoryboard>
                </EventTrigger>
            </Image.Triggers>
            <Image.OpacityMask>
                <RadialGradientBrush Center="0.8,0.4" GradientOrigin="0.8,0.4" RadiusX="0.8" RadiusY="1.2">
                    <GradientStop Offset="0.0" Color="{DynamicResource MaskGradientStartColor}" />
                    <GradientStop Offset="0.4" Color="{DynamicResource MaskGradientEndColor}" />
                </RadialGradientBrush>
            </Image.OpacityMask>
        </Image>

        <StackPanel>
            <ui:ContentDialog
                Name="IGGBDialog"
                CloseButtonText="Close"
                IsEnabled="{Binding IsLibraryConnected, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}">
                <Grid>
                    <ui:ProgressRing
                        Panel.ZIndex="1"
                        IsIndeterminate="True"
                        Visibility="{Binding IsLibraryBusy, Mode=OneWay, UpdateSourceTrigger=PropertyChanged, Converter={StaticResource BooleanToVisibilityConverter}}" />

                    <ikw:SimpleStackPanel
                        Width="500"
                        IsEnabled="{Binding IsLibraryBusy, Mode=OneWay, UpdateSourceTrigger=PropertyChanged, Converter={StaticResource InvertBooleanConverter}}"
                        Spacing="12">
                        <ikw:SimpleStackPanel Spacing="3">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="9*" />
                                    <ColumnDefinition Width="2*" />
                                </Grid.ColumnDefinitions>

                                <TextBox
                                    HorizontalAlignment="Stretch"
                                    ui:ControlHelper.PlaceholderText="Search"
                                    Text="{Binding LibrarySearchField, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />

                                <Button
                                    Grid.Column="1"
                                    Margin="6,0,0,0"
                                    HorizontalAlignment="Stretch"
                                    Command="{Binding RefreshLibrary}"
                                    Content="Search" />
                            </Grid>

                            <ComboBox
                                MaxHeight="170"
                                HorizontalAlignment="Stretch"
                                IsEnabled="{Binding HasLibraryEntry, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                ItemsSource="{Binding LibraryPickers, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                SelectedIndex="{Binding SelectedLibraryIndex, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">

                                <ComboBox.ItemContainerStyle>
                                    <Style BasedOn="{StaticResource {x:Type ComboBoxItem}}" TargetType="ComboBoxItem">
                                        <Setter Property="ToolTip" Value="{Binding Description}" />
                                        <Setter Property="HorizontalContentAlignment" Value="Stretch" />
                                    </Style>
                                </ComboBox.ItemContainerStyle>

                                <ComboBox.ItemTemplate>
                                    <DataTemplate>
                                        <Grid>
                                            <TextBlock
                                                HorizontalAlignment="Left"
                                                Style="{StaticResource BodyTextBlockStyle}"
                                                Text="{Binding Name}" />

                                            <TextBlock
                                                HorizontalAlignment="Right"
                                                Style="{StaticResource BodyTextBlockStyle}"
                                                Text="{Binding ReleaseDateYear}" />
                                        </Grid>
                                    </DataTemplate>
                                </ComboBox.ItemTemplate>
                            </ComboBox>

                            <ikw:SimpleStackPanel Spacing="3" Visibility="{Binding HasLibraryEntry, Converter={StaticResource BooleanToVisibilityConverter}}">
                                <TextBlock Style="{StaticResource BaseTextBlockStyle}" Text="Preview" />

                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="120" />
                                        <ColumnDefinition />
                                    </Grid.ColumnDefinitions>

                                    <StackPanel Grid.Column="0">
                                        <ui:FlipView
                                            x:Name="FlipViewCovers"
                                            Height="180"
                                            HorizontalAlignment="Stretch"
                                            ItemsSource="{Binding LibraryCovers, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                            SelectedIndex="{Binding LibraryCoversIndex, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                                            <ui:FlipView.ItemTemplate>
                                                <DataTemplate>
                                                    <Image
                                                        HorizontalAlignment="Center"
                                                        Source="{Binding Image, Mode=OneWay}"
                                                        Stretch="UniformToFill" />
                                                </DataTemplate>
                                            </ui:FlipView.ItemTemplate>
                                        </ui:FlipView>

                                        <ui:PipsPager
                                            Margin="0,10,0,0"
                                            HorizontalAlignment="Center"
                                            IsEnabled="False"
                                            MaxVisiblePips="6"
                                            NextButtonVisibility="Collapsed"
                                            NumberOfPages="{Binding LibraryCovers.Count}"
                                            PreviousButtonVisibility="Collapsed"
                                            SelectedPageIndex="{Binding SelectedIndex, ElementName=FlipViewCovers, Mode=TwoWay}" />
                                    </StackPanel>

                                    <StackPanel Grid.Column="1" Margin="6,0,0,0">
                                        <ui:FlipView
                                            x:Name="FlipViewArtworks"
                                            Height="180"
                                            HorizontalAlignment="Stretch"
                                            ItemsSource="{Binding LibraryArtworks, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                            SelectedIndex="{Binding LibraryArtworksIndex, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                                            <ui:FlipView.ItemTemplate>
                                                <DataTemplate>
                                                    <Image
                                                        HorizontalAlignment="Center"
                                                        Source="{Binding Image, Mode=OneWay}"
                                                        Stretch="UniformToFill" />
                                                </DataTemplate>
                                            </ui:FlipView.ItemTemplate>
                                        </ui:FlipView>

                                        <ui:PipsPager
                                            Margin="0,10,0,0"
                                            HorizontalAlignment="Center"
                                            IsEnabled="False"
                                            MaxVisiblePips="6"
                                            NextButtonVisibility="Collapsed"
                                            NumberOfPages="{Binding LibraryArtworks.Count}"
                                            PreviousButtonVisibility="Collapsed"
                                            SelectedPageIndex="{Binding SelectedIndex, ElementName=FlipViewArtworks, Mode=TwoWay}" />
                                    </StackPanel>
                                </Grid>

                                <Button
                                    HorizontalAlignment="Stretch"
                                    Command="{Binding DownloadLibrary}"
                                    Content="Update metadata"
                                    IsEnabled="{Binding HasLibraryEntry, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                    Style="{DynamicResource AccentButtonStyle}" />
                            </ikw:SimpleStackPanel>
                        </ikw:SimpleStackPanel>
                    </ikw:SimpleStackPanel>
                </Grid>
            </ui:ContentDialog>

            <ui:ContentDialog
                Name="ProfileRenameDialog"
                CloseButtonClick="ProfileRenameDialog_CloseButtonClick"
                CloseButtonText="{l:Static resx:Resources.ProfilesPage_Dialogue_Cancel}"
                PrimaryButtonClick="ProfileRenameDialog_PrimaryButtonClick"
                PrimaryButtonText="{l:Static resx:Resources.ProfilesPage_Dialogue_Rename}">
                <ikw:SimpleStackPanel MinWidth="500" Spacing="12">
                    <ikw:SimpleStackPanel Spacing="3">
                        <TextBlock Style="{StaticResource BaseTextBlockStyle}" Text="{l:Static resx:Resources.ProfilesPage_ProfileRenamingDialogue_Name}" />
                        <TextBox Name="tB_ProfileName" HorizontalAlignment="Stretch" />
                    </ikw:SimpleStackPanel>
                </ikw:SimpleStackPanel>
            </ui:ContentDialog>

            <ui:ContentDialog
                Name="SubProfileRenameDialog"
                CloseButtonClick="SubProfileRenameDialog_CloseButtonClick"
                CloseButtonText="{l:Static resx:Resources.ProfilesPage_Dialogue_Cancel}"
                PrimaryButtonClick="SubProfileRenameDialog_PrimaryButtonClick"
                PrimaryButtonText="{l:Static resx:Resources.ProfilesPage_Dialogue_Rename}">
                <ikw:SimpleStackPanel MinWidth="500" Spacing="12">
                    <ikw:SimpleStackPanel Spacing="3">
                        <TextBlock Style="{StaticResource BaseTextBlockStyle}" Text="{l:Static resx:Resources.ProfilesPage_SubProfileRenamingDialogue_Name}" />
                        <TextBox
                            Name="tb_SubProfileName"
                            HorizontalAlignment="Stretch"
                            VerticalAlignment="Center" />
                    </ikw:SimpleStackPanel>
                </ikw:SimpleStackPanel>
            </ui:ContentDialog>

            <Border>
                <ikw:SimpleStackPanel Name="StackPanel_Profiles" Spacing="8">
                    <ikw:SimpleStackPanel Spacing="3">

                        <!--  Profile picker  -->
                        <Border
                            Padding="15,12,12,12"
                            Background="{DynamicResource ExpanderHeaderBackground}"
                            CornerRadius="{DynamicResource ControlCornerRadius}">

                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="2*" MinWidth="70" />
                                    <ColumnDefinition Width="5*" MinWidth="200" />
                                </Grid.ColumnDefinitions>

                                <DockPanel>
                                    <ui:FontIcon
                                        Name="ProfileIcon"
                                        HorizontalAlignment="Center"
                                        FontFamily="{DynamicResource SymbolThemeFontFamily}"
                                        Foreground="{DynamicResource SystemControlForegroundBaseHighBrush}"
                                        Glyph="&#xE7EE;" />

                                    <ikw:SimpleStackPanel Margin="12,0,0,0" VerticalAlignment="Center">
                                        <TextBlock Style="{StaticResource BodyTextBlockStyle}" Text="{l:Static resx:Resources.ProfilesPage_ProfileSelection}" />
                                        <TextBlock
                                            Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"
                                            Style="{StaticResource CaptionTextBlockStyle}"
                                            Text="{l:Static resx:Resources.ProfilesPage_ProfileSelectionDesc}"
                                            TextWrapping="Wrap" />
                                    </ikw:SimpleStackPanel>
                                </DockPanel>

                                <Grid Grid.Column="1" Margin="12,0,0,0">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="8*" MinWidth="140" />
                                        <ColumnDefinition Width="Auto" />
                                        <ColumnDefinition Width="Auto" />
                                        <ColumnDefinition Width="Auto" />
                                    </Grid.ColumnDefinitions>

                                    <ComboBox
                                        Name="cB_Profiles"
                                        Grid.Column="0"
                                        HorizontalAlignment="Stretch"
                                        VerticalAlignment="Center"
                                        SelectionChanged="cB_Profiles_SelectionChanged" />

                                    <!--  Create new profile  -->
                                    <Button
                                        Grid.Column="1"
                                        Margin="6,0,0,0"
                                        VerticalAlignment="Center"
                                        Click="b_CreateProfile_Click"
                                        Style="{DynamicResource AccentButtonStyle}">
                                        <ui:FontIcon FontFamily="{DynamicResource SymbolThemeFontFamily}" Glyph="&#xe710;" />
                                    </Button>

                                    <!--  Delete profile  -->
                                    <Button
                                        Name="b_DeleteProfile"
                                        Grid.Column="2"
                                        Margin="6,0,0,0"
                                        VerticalAlignment="Center"
                                        Click="b_DeleteProfile_Click">
                                        <ui:FontIcon FontFamily="{DynamicResource SymbolThemeFontFamily}" Glyph="&#xe738;" />
                                    </Button>

                                    <!--  Rename profile  -->
                                    <Button
                                        Name="b_ProfileRename"
                                        Grid.Column="3"
                                        Margin="6,0,0,0"
                                        VerticalAlignment="Center"
                                        Click="b_ProfileRename_Click">
                                        <ui:FontIcon FontFamily="{DynamicResource SymbolThemeFontFamily}" Glyph="&#xe712;" />
                                    </Button>

                                </Grid>
                            </Grid>
                        </Border>

                        <ui:InfoBar
                            Name="WarningInfoBar"
                            d:Visibility="Visible"
                            IsClosable="False"
                            IsOpen="True"
                            Severity="Warning"
                            Visibility="Collapsed" />
                    </ikw:SimpleStackPanel>

                    <!--  Profile details  -->
                    <TextBlock Style="{StaticResource BaseTextBlockStyle}" Text="{l:Static resx:Resources.ProfilesPage_ProfileDetails}" />
                    <ikw:SimpleStackPanel Name="ProfileDetails" Spacing="3">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="150" />
                                <ColumnDefinition Width="8*" MinWidth="200" />
                            </Grid.ColumnDefinitions>

                            <ikw:SimpleStackPanel Spacing="3">
                                <Border
                                    Height="225"
                                    Padding="15,12,12,12"
                                    BorderBrush="{DynamicResource SystemControlForegroundBaseLowBrush}"
                                    CornerRadius="{DynamicResource ControlCornerRadius}">
                                    <Border.Background>
                                        <ImageBrush
                                            AlignmentY="Center"
                                            ImageSource="{Binding Cover, Mode=OneWay, UpdateSourceTrigger=PropertyChanged, NotifyOnTargetUpdated=True}"
                                            Stretch="UniformToFill" />
                                    </Border.Background>
                                    <Border.Triggers>
                                        <EventTrigger RoutedEvent="Binding.TargetUpdated">
                                            <BeginStoryboard>
                                                <Storyboard>
                                                    <!--  fade in from 0→1 in 300ms  -->
                                                    <DoubleAnimation
                                                        Storyboard.TargetProperty="Opacity"
                                                        From="0"
                                                        To="1"
                                                        Duration="0:0:0.3" />
                                                </Storyboard>
                                            </BeginStoryboard>
                                        </EventTrigger>
                                    </Border.Triggers>

                                    <Button
                                        Name="b_Play"
                                        HorizontalAlignment="Stretch"
                                        VerticalAlignment="Bottom"
                                        Command="{Binding LaunchExecutable}"
                                        Content="{l:Static resx:Resources.ProfilesPage_Play}"
                                        Style="{DynamicResource AccentButtonStyle}" />
                                </Border>
                            </ikw:SimpleStackPanel>

                            <Border
                                Grid.Column="1"
                                Margin="6,0,0,0"
                                Padding="15,12,12,12"
                                Background="{DynamicResource ExpanderHeaderBackground}"
                                BorderBrush="{DynamicResource SystemControlForegroundBaseLowBrush}"
                                CornerRadius="{DynamicResource ControlCornerRadius}">

                                <ikw:SimpleStackPanel Spacing="3">
                                    <!--  Path  -->
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition MinWidth="110" />
                                            <ColumnDefinition Width="10*" MinWidth="200" />
                                        </Grid.ColumnDefinitions>

                                        <DockPanel>
                                            <ui:FontIcon
                                                Height="40"
                                                FontFamily="{DynamicResource SymbolThemeFontFamily}"
                                                Foreground="{DynamicResource SystemControlForegroundBaseHighBrush}"
                                                Glyph="&#xED25;" />
                                            <TextBlock
                                                Margin="12,0,0,0"
                                                VerticalAlignment="Center"
                                                Foreground="{DynamicResource SystemControlForegroundBaseHighBrush}"
                                                Style="{StaticResource BodyTextBlockStyle}"
                                                Text="{l:Static resx:Resources.ProfilesPage_ProfilePath}" />
                                        </DockPanel>

                                        <DockPanel Grid.Column="1" Margin="12,0,0,0">
                                            <TextBox
                                                Name="tB_ProfilePath"
                                                HorizontalAlignment="Stretch"
                                                VerticalAlignment="Center"
                                                BorderThickness="1"
                                                IsEnabled="False"
                                                IsReadOnly="True" />
                                        </DockPanel>
                                    </Grid>

                                    <!--  Arguments  -->
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition MinWidth="110" />
                                            <ColumnDefinition Width="10*" MinWidth="200" />
                                        </Grid.ColumnDefinitions>

                                        <DockPanel>
                                            <ui:FontIcon
                                                Height="40"
                                                FontFamily="{DynamicResource SymbolThemeFontFamily}"
                                                Foreground="{DynamicResource SystemControlForegroundBaseHighBrush}"
                                                Glyph="&#xe712;" />
                                            <TextBlock
                                                Margin="12,0,0,0"
                                                VerticalAlignment="Center"
                                                Foreground="{DynamicResource SystemControlForegroundBaseHighBrush}"
                                                Style="{StaticResource BodyTextBlockStyle}"
                                                Text="{l:Static resx:Resources.ProfilesPage_ProfileArguments}" />
                                        </DockPanel>

                                        <DockPanel Grid.Column="1" Margin="12,0,0,0">
                                            <TextBox
                                                Name="tB_ProfileArguments"
                                                HorizontalAlignment="Stretch"
                                                VerticalAlignment="Center"
                                                BorderThickness="1"
                                                TextChanged="tB_ProfileArguments_TextChanged" />
                                        </DockPanel>
                                    </Grid>

                                    <!--  Sub Profiles  -->
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition MinWidth="110" />
                                            <ColumnDefinition Width="10*" MinWidth="200" />
                                        </Grid.ColumnDefinitions>

                                        <DockPanel>
                                            <ui:FontIcon
                                                Height="40"
                                                FontFamily="{DynamicResource SymbolThemeFontFamily}"
                                                Foreground="{DynamicResource SystemControlForegroundBaseHighBrush}"
                                                Glyph="&#xE81E;" />
                                            <TextBlock
                                                Margin="12,0,0,0"
                                                VerticalAlignment="Center"
                                                Foreground="{DynamicResource SystemControlForegroundBaseHighBrush}"
                                                Style="{StaticResource BodyTextBlockStyle}"
                                                Text="{l:Static resx:Resources.ProfilesPage_SubProfiles}" />
                                        </DockPanel>
                                        <DockPanel Grid.Column="1">
                                            <Grid Margin="12,0,0,0">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="8*" MinWidth="200" />
                                                    <ColumnDefinition Width="Auto" />
                                                    <ColumnDefinition Width="Auto" />
                                                    <ColumnDefinition Width="Auto" />
                                                    <ColumnDefinition Width="Auto" />
                                                </Grid.ColumnDefinitions>

                                                <ComboBox
                                                    Name="cb_SubProfilePicker"
                                                    Grid.Column="0"
                                                    HorizontalAlignment="Stretch"
                                                    VerticalAlignment="Center"
                                                    SelectionChanged="cb_SubProfilePicker_SelectionChanged" />

                                                <Button
                                                    Name="b_SubProfileCreate"
                                                    Grid.Column="1"
                                                    Margin="6,0,0,0"
                                                    VerticalAlignment="Center"
                                                    Click="b_SubProfileCreate_Click"
                                                    Style="{DynamicResource AccentButtonStyle}">
                                                    <ui:FontIcon FontFamily="{DynamicResource SymbolThemeFontFamily}" Glyph="&#xe710;" />
                                                </Button>

                                                <Button
                                                    Name="b_SubProfileDelete"
                                                    Grid.Column="2"
                                                    Margin="6,0,0,0"
                                                    VerticalAlignment="Center"
                                                    Click="b_SubProfileDelete_Click">
                                                    <ui:FontIcon FontFamily="{DynamicResource SymbolThemeFontFamily}" Glyph="&#xe738;" />
                                                </Button>

                                                <Button
                                                    Name="b_SubProfileRename"
                                                    Grid.Column="3"
                                                    Margin="6,0,0,0"
                                                    VerticalAlignment="Center"
                                                    Click="b_SubProfileRename_Click">
                                                    <ui:FontIcon FontFamily="{DynamicResource SymbolThemeFontFamily}" Glyph="&#xe712;" />
                                                </Button>
                                            </Grid>
                                        </DockPanel>
                                    </Grid>
                                </ikw:SimpleStackPanel>
                            </Border>
                        </Grid>

                        <!--  Enable profile  -->
                        <Border
                            Padding="15,12,12,12"
                            d:Visibility="Visible"
                            Background="{DynamicResource ExpanderHeaderBackground}"
                            CornerRadius="{DynamicResource ControlCornerRadius}"
                            Visibility="Collapsed">

                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="9*" MinWidth="200" />
                                    <ColumnDefinition MinWidth="200" />
                                </Grid.ColumnDefinitions>

                                <DockPanel>
                                    <ui:FontIcon
                                        Height="40"
                                        HorizontalAlignment="Center"
                                        FontFamily="{DynamicResource SymbolThemeFontFamily}"
                                        Glyph="&#xE7EE;" />

                                    <ikw:SimpleStackPanel Margin="12,0,0,0" VerticalAlignment="Center">
                                        <TextBlock Style="{StaticResource BodyTextBlockStyle}" Text="{l:Static resx:Resources.ProfilesPage_EnableProfile}" />
                                        <TextBlock
                                            Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"
                                            Style="{StaticResource CaptionTextBlockStyle}"
                                            Text="{l:Static resx:Resources.ProfilesPage_EnableProfileDesc}"
                                            TextWrapping="Wrap" />
                                    </ikw:SimpleStackPanel>
                                </DockPanel>

                                <ui:ToggleSwitch
                                    Name="Toggle_EnableProfile"
                                    Grid.Column="1"
                                    HorizontalAlignment="Right"
                                    Style="{DynamicResource InvertedToggleSwitchStyle}"
                                    Toggled="Toggle_EnableProfile_Toggled" />
                            </Grid>
                        </Border>
                    </ikw:SimpleStackPanel>

                    <!--  Profile settings  -->
                    <TextBlock Style="{StaticResource BaseTextBlockStyle}" Text="{l:Static resx:Resources.ProfilesPage_ProfileSettings}" />
                    <ikw:SimpleStackPanel Spacing="3">
                        <!--  Global settings  -->
                        <ui:SettingsExpander
                            Name="GlobalSettings"
                            d:IsExpanded="true"
                            Description="{l:Static resx:Resources.ProfilesPage_GlobalSettingsDesc}"
                            Header="{l:Static resx:Resources.ProfilesPage_GlobalSettings}">
                            <ui:SettingsExpander.HeaderIcon>
                                <ui:FontIcon Glyph="&#xE713;" />
                            </ui:SettingsExpander.HeaderIcon>

                            <ui:SettingsExpander.Items>
                                <ui:SettingsCard ContentAlignment="Left">
                                    <CheckBox
                                        Name="cB_Whitelist"
                                        Checked="cB_Whitelist_Checked"
                                        Content="{l:Static resx:Resources.ProfilesPage_Whitelist}"
                                        Unchecked="cB_Whitelist_Checked" />
                                </ui:SettingsCard>
                                <ui:SettingsCard ContentAlignment="Left">
                                    <CheckBox
                                        Name="cB_Pinned"
                                        Checked="cB_Pinned_Checked"
                                        Content="{l:Static resx:Resources.ProfilesPage_Pinned}"
                                        Unchecked="cB_Pinned_Checked" />
                                </ui:SettingsCard>
                                <ui:SettingsCard ContentAlignment="Left">
                                    <CheckBox
                                        Name="cB_Suspend"
                                        Checked="cB_Suspend_Checked"
                                        Content="{l:Static resx:Resources.ProfilesPage_SuspendOnSleep}"
                                        Unchecked="cB_Suspend_Checked" />
                                </ui:SettingsCard>
                                <ui:SettingsCard Header="{l:Static resx:Resources.ProfilesPage_Wrapper}">
                                    <ComboBox
                                        Name="cB_Wrapper"
                                        SelectedIndex="0"
                                        SelectionChanged="cB_Wrapper_SelectionChanged">
                                        <ComboBoxItem Name="cB_Wrapper_Disabled" Content="{l:Static resx:Resources.ProfilesPage_Wrapper_Disabled}" />
                                        <ComboBoxItem
                                            Name="cB_Wrapper_Injection"
                                            Content="{l:Static resx:Resources.ProfilesPage_Wrapper_Injection}"
                                            IsEnabled="False" />
                                        <ComboBoxItem
                                            Name="cB_Wrapper_Redirection"
                                            Content="{l:Static resx:Resources.ProfilesPage_Wrapper_Redirection}"
                                            IsEnabled="False" />
                                    </ComboBox>
                                </ui:SettingsCard>
                            </ui:SettingsExpander.Items>
                        </ui:SettingsExpander>

                        <!--  Library settings  -->
                        <ui:SettingsExpander
                            Name="LibrarySettings"
                            HorizontalAlignment="Stretch"
                            d:IsExpanded="true"
                            Description="{l:Static resx:Resources.ProfilesPage_Library_Desc}"
                            Header="{l:Static resx:Resources.ProfilesPage_Library_Title}">
                            <ui:SettingsExpander.HeaderIcon>
                                <ui:FontIcon Glyph="&#xE8F1;" />
                            </ui:SettingsExpander.HeaderIcon>

                            <Button
                                HorizontalAlignment="Right"
                                VerticalAlignment="Center"
                                Command="{Binding DisplayLibrary}"
                                Content="{l:Static resx:Resources.ProfilesPage_LibraryRefreshImageButton}"
                                IsEnabled="{Binding IsLibraryConnected, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                Style="{DynamicResource AccentButtonStyle}" />

                            <ui:SettingsExpander.Items>
                                <ui:SettingsCard Description="{l:Static resx:Resources.ProfilesPage_ShowInLibraryDesc}" Header="{l:Static resx:Resources.ProfilesPage_ShowInLibrary}">
                                    <ui:ToggleSwitch Name="Toggle_ShowInLibrary" Toggled="ShowInLibrary_Toggled" />
                                </ui:SettingsCard>
                            </ui:SettingsExpander.Items>
                        </ui:SettingsExpander>

                        <!--  Graphics settings  -->
                        <Expander
                            Name="GraphicsSettings"
                            HorizontalAlignment="Stretch"
                            Expanded="Expander_Expanded">
                            <Expander.Header>
                                <DockPanel Margin="0,12,12,12">
                                    <ui:FontIcon
                                        Height="40"
                                        HorizontalAlignment="Center"
                                        FontFamily="{DynamicResource SymbolThemeFontFamily}"
                                        Glyph="&#xE790;" />

                                    <ikw:SimpleStackPanel Margin="12,0,0,0" VerticalAlignment="Center">
                                        <TextBlock Style="{StaticResource BodyTextBlockStyle}" Text="{l:Static resx:Resources.ProfilesPage_GraphicsSetting_Title}" />
                                        <TextBlock
                                            Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"
                                            Style="{StaticResource CaptionTextBlockStyle}"
                                            Text="{l:Static resx:Resources.ProfilesPage_GraphicsSetting_Desc}"
                                            TextWrapping="Wrap" />
                                    </ikw:SimpleStackPanel>
                                </DockPanel>
                            </Expander.Header>
                            <Expander.Content>
                                <ikw:SimpleStackPanel Margin="30,0,0,0" Spacing="12">

                                    <!--  GPU Scaling  -->
                                    <ikw:SimpleStackPanel
                                        Name="StackProfileGPUScaling"
                                        IsEnabled="False"
                                        Spacing="3">
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="5*" />
                                                <ColumnDefinition Width="5*" />
                                            </Grid.ColumnDefinitions>

                                            <ikw:SimpleStackPanel VerticalAlignment="Center">
                                                <TextBlock Style="{StaticResource BodyTextBlockStyle}" Text="{l:Static resx:Resources.ProfilesPage_GPUScaling}" />
                                                <TextBlock
                                                    Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"
                                                    Style="{StaticResource CaptionTextBlockStyle}"
                                                    Text="{l:Static resx:Resources.ProfilesPage_GPUScalingDesc}"
                                                    TextWrapping="Wrap" />
                                            </ikw:SimpleStackPanel>

                                            <ui:ToggleSwitch
                                                Name="GPUScalingToggle"
                                                Grid.Column="1"
                                                Margin="12,0,0,0"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                Style="{DynamicResource InvertedToggleSwitchStyle}"
                                                Toggled="GPUScaling_Toggled" />
                                        </Grid>

                                        <Separator Background="{DynamicResource ExpanderHeaderBackground}" Visibility="{Binding ElementName=GPUScalingToggle, Path=IsOn, Converter={StaticResource BooleanToVisibilityConverter}}" />

                                        <StackPanel d:Visibility="Visible" Visibility="{Binding ElementName=GPUScalingToggle, Path=IsOn, Converter={StaticResource BooleanToVisibilityConverter}}">
                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="5*" />
                                                    <ColumnDefinition Width="5*" />
                                                </Grid.ColumnDefinitions>

                                                <ikw:SimpleStackPanel VerticalAlignment="Center">
                                                    <TextBlock Style="{StaticResource BodyTextBlockStyle}" Text="{l:Static resx:Resources.ProfilesPage_ScalingMode}" />
                                                    <TextBlock
                                                        Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"
                                                        Style="{StaticResource CaptionTextBlockStyle}"
                                                        Text="{l:Static resx:Resources.ProfilesPage_ScalingModeDesc}"
                                                        TextWrapping="Wrap" />
                                                </ikw:SimpleStackPanel>

                                                <ComboBox
                                                    Name="GPUScalingComboBox"
                                                    Grid.Column="1"
                                                    Margin="12,0,0,0"
                                                    HorizontalAlignment="Stretch"
                                                    VerticalAlignment="Center"
                                                    SelectionChanged="GPUScalingComboBox_SelectionChanged">
                                                    <ComboBoxItem Content="{l:Static resx:Resources.ProfilesPage_ScalingMode_PreserveAspectRatio}" />
                                                    <ComboBoxItem Content="{l:Static resx:Resources.ProfilesPage_ScalingMode_FullPanel}" />
                                                    <ComboBoxItem Content="{l:Static resx:Resources.ProfilesPage_ScalingMode_Center}" IsEnabled="{Binding ElementName=RSRToggle, Path=IsOn, Converter={StaticResource InvertBooleanConverter}}" />
                                                </ComboBox>
                                            </Grid>
                                        </StackPanel>
                                    </ikw:SimpleStackPanel>

                                    <!--  Separator  -->
                                    <Separator
                                        Margin="-46,0,-16,0"
                                        BorderBrush="{DynamicResource SystemControlBackgroundChromeMediumBrush}"
                                        BorderThickness="0,1,0,0" />

                                    <!--  RSR  -->
                                    <ikw:SimpleStackPanel
                                        Name="StackProfileRSR"
                                        d:Background="Red"
                                        d:Visibility="Visible"
                                        IsEnabled="False"
                                        Spacing="3"
                                        Visibility="Collapsed">
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="5*" />
                                                <ColumnDefinition Width="5*" />
                                            </Grid.ColumnDefinitions>

                                            <ikw:SimpleStackPanel VerticalAlignment="Center">
                                                <TextBlock Style="{StaticResource BodyTextBlockStyle}" Text="{l:Static resx:Resources.ProfilesPage_RSR}" />
                                                <TextBlock
                                                    Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"
                                                    Style="{StaticResource CaptionTextBlockStyle}"
                                                    Text="{l:Static resx:Resources.ProfilesPage_RSRDesc}"
                                                    TextWrapping="Wrap" />
                                            </ikw:SimpleStackPanel>

                                            <ui:ToggleSwitch
                                                Name="RSRToggle"
                                                Grid.Column="1"
                                                Margin="12,0,0,0"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                IsEnabled="{Binding ElementName=GPUScalingToggle, Path=IsOn}"
                                                Style="{DynamicResource InvertedToggleSwitchStyle}"
                                                Toggled="RSRToggle_Toggled" />
                                        </Grid>

                                        <Separator Background="{DynamicResource ExpanderHeaderBackground}" Visibility="{Binding ElementName=RSRToggle, Path=IsOn, Converter={StaticResource BooleanToVisibilityConverter}}" />

                                        <DockPanel
                                            Grid.Column="1"
                                            Margin="12,0,0,0"
                                            d:Visibility="Visible"
                                            Visibility="{Binding ElementName=RSRToggle, Path=IsOn, Converter={StaticResource BooleanToVisibilityConverter}}">

                                            <TextBox
                                                Height="31"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                HorizontalContentAlignment="Center"
                                                IsReadOnly="True"
                                                Text="{Binding Value, StringFormat={}{0:N0} %, ElementName=RSRSlider, Mode=OneWay}" />

                                            <Slider
                                                x:Name="RSRSlider"
                                                Margin="6,0,0,0"
                                                VerticalAlignment="Center"
                                                AutoToolTipPrecision="0"
                                                IsMoveToPointEnabled="True"
                                                IsSnapToTickEnabled="True"
                                                LargeChange="5"
                                                Maximum="100"
                                                Minimum="0"
                                                SmallChange="1"
                                                TickFrequency="5"
                                                TickPlacement="BottomRight"
                                                ToolTip="{Binding Value, StringFormat={}{0:N0} %, RelativeSource={RelativeSource Self}, Mode=OneWay}"
                                                ValueChanged="RSRSlider_ValueChanged" />
                                        </DockPanel>
                                    </ikw:SimpleStackPanel>

                                    <!--  Separator  -->
                                    <Separator
                                        Margin="-46,0,-16,0"
                                        BorderBrush="{DynamicResource SystemControlBackgroundChromeMediumBrush}"
                                        BorderThickness="0,1,0,0"
                                        Visibility="{Binding ElementName=StackProfileRSR, Path=Visibility}" />

                                    <!--  AFMF  -->
                                    <ikw:SimpleStackPanel
                                        Name="StackProfileAFMF"
                                        d:Background="Red"
                                        d:Visibility="Visible"
                                        IsEnabled="False"
                                        Spacing="3"
                                        Visibility="Collapsed">
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="5*" />
                                                <ColumnDefinition Width="5*" />
                                            </Grid.ColumnDefinitions>

                                            <ikw:SimpleStackPanel VerticalAlignment="Center">
                                                <TextBlock Style="{StaticResource BodyTextBlockStyle}" Text="{l:Static resx:Resources.ProfilesPage_AFMF}" />
                                                <TextBlock
                                                    Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"
                                                    Style="{StaticResource CaptionTextBlockStyle}"
                                                    Text="{l:Static resx:Resources.ProfilesPage_AFMFDesc}"
                                                    TextWrapping="Wrap" />
                                            </ikw:SimpleStackPanel>

                                            <ui:ToggleSwitch
                                                Name="AFMFToggle"
                                                Grid.Column="1"
                                                Margin="12,0,0,0"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                Style="{DynamicResource InvertedToggleSwitchStyle}"
                                                Toggled="AFMFToggle_Toggled" />
                                        </Grid>
                                    </ikw:SimpleStackPanel>

                                    <!--  Separator  -->
                                    <Separator
                                        Margin="-46,0,-16,0"
                                        BorderBrush="{DynamicResource SystemControlBackgroundChromeMediumBrush}"
                                        BorderThickness="0,1,0,0"
                                        Visibility="{Binding ElementName=StackProfileAFMF, Path=Visibility}" />

                                    <!--  Integer Scaling  -->
                                    <ikw:SimpleStackPanel
                                        Name="StackProfileIS"
                                        IsEnabled="False"
                                        Spacing="3">
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="5*" />
                                                <ColumnDefinition Width="5*" />
                                            </Grid.ColumnDefinitions>

                                            <ikw:SimpleStackPanel VerticalAlignment="Center">
                                                <TextBlock Style="{StaticResource BodyTextBlockStyle}" Text="{l:Static resx:Resources.ProfilesPage_IS}" />
                                                <TextBlock
                                                    Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"
                                                    Style="{StaticResource CaptionTextBlockStyle}"
                                                    Text="{l:Static resx:Resources.ProfilesPage_ISDesc}"
                                                    TextWrapping="Wrap" />
                                            </ikw:SimpleStackPanel>

                                            <ui:ToggleSwitch
                                                Name="IntegerScalingToggle"
                                                Grid.Column="1"
                                                Margin="12,0,0,0"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                IsEnabled="{Binding ElementName=GPUScalingToggle, Path=IsOn}"
                                                Style="{DynamicResource InvertedToggleSwitchStyle}"
                                                Toggled="IntegerScalingToggle_Toggled" />
                                        </Grid>

                                        <Separator Background="{DynamicResource ExpanderHeaderBackground}" Visibility="{Binding ElementName=IntegerScalingToggle, Path=IsOn, Converter={StaticResource BooleanToVisibilityConverter}}" />

                                        <StackPanel d:Visibility="Visible" Visibility="{Binding ElementName=IntegerScalingToggle, Path=IsOn, Converter={StaticResource BooleanToVisibilityConverter}}">
                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="5*" />
                                                    <ColumnDefinition Width="5*" />
                                                </Grid.ColumnDefinitions>

                                                <Grid.RowDefinitions>
                                                    <RowDefinition />
                                                    <RowDefinition />
                                                </Grid.RowDefinitions>

                                                <ikw:SimpleStackPanel VerticalAlignment="Center">
                                                    <TextBlock Style="{StaticResource BodyTextBlockStyle}" Text="{l:Static resx:Resources.ProfilesPage_ResolutionScale}" />
                                                    <TextBlock
                                                        Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"
                                                        Style="{StaticResource CaptionTextBlockStyle}"
                                                        Text="{l:Static resx:Resources.ProfilesPage_ResolutionScaleDesc}"
                                                        TextWrapping="Wrap" />
                                                </ikw:SimpleStackPanel>

                                                <ComboBox
                                                    Name="IntegerScalingComboBox"
                                                    Grid.Column="1"
                                                    Margin="12,0,0,0"
                                                    HorizontalAlignment="Stretch"
                                                    VerticalAlignment="Center"
                                                    SelectionChanged="IntegerScalingComboBox_SelectionChanged" />

                                                <ikw:SimpleStackPanel
                                                    Grid.Row="1"
                                                    Grid.Column="1"
                                                    Height="20"
                                                    Margin="20,6,0,0"
                                                    HorizontalAlignment="Center"
                                                    Orientation="Horizontal"
                                                    Visibility="{Binding ElementName=IntegerScalingComboBox, Path=SelectedIndex, Converter={StaticResource IndexToVisibilityConverter}, ConverterParameter=0}">
                                                    <ui:FontIcon
                                                        Height="20"
                                                        Margin="10,0"
                                                        HorizontalAlignment="Center"
                                                        FontFamily="{DynamicResource SymbolThemeFontFamily}"
                                                        Glyph="&#xe7ba;" />
                                                    <TextBlock
                                                        Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"
                                                        Style="{StaticResource CaptionTextBlockStyle}"
                                                        Text="{l:Static resx:Resources.QuickSettingsPage_ResScaleExclusiveFullscreen}"
                                                        TextWrapping="Wrap" />
                                                </ikw:SimpleStackPanel>
                                            </Grid>
                                        </StackPanel>
                                    </ikw:SimpleStackPanel>

                                    <!--  Separator  -->
                                    <Separator
                                        Margin="-46,0,-16,0"
                                        BorderBrush="{DynamicResource SystemControlBackgroundChromeMediumBrush}"
                                        BorderThickness="0,1,0,0" />

                                    <!--  RIS  -->
                                    <ikw:SimpleStackPanel
                                        Name="StackProfileRIS"
                                        IsEnabled="False"
                                        Spacing="3">
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="5*" />
                                                <ColumnDefinition Width="5*" />
                                            </Grid.ColumnDefinitions>

                                            <ikw:SimpleStackPanel VerticalAlignment="Center">
                                                <TextBlock Style="{StaticResource BodyTextBlockStyle}" Text="{l:Static resx:Resources.ProfilesPage_ImageSharpening}" />
                                                <TextBlock
                                                    Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"
                                                    Style="{StaticResource CaptionTextBlockStyle}"
                                                    Text="{l:Static resx:Resources.ProfilesPage_ImageSharpeningDesc}"
                                                    TextWrapping="Wrap" />
                                            </ikw:SimpleStackPanel>

                                            <ui:ToggleSwitch
                                                Name="RISToggle"
                                                Grid.Column="1"
                                                Margin="12,0,0,0"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                Style="{DynamicResource InvertedToggleSwitchStyle}"
                                                Toggled="RISToggle_Toggled" />
                                        </Grid>

                                        <Separator Background="{DynamicResource ExpanderHeaderBackground}" Visibility="{Binding ElementName=RISToggle, Path=IsOn, Converter={StaticResource BooleanToVisibilityConverter}}" />

                                        <DockPanel
                                            Grid.Column="1"
                                            Margin="12,0,0,0"
                                            d:Visibility="Visible"
                                            Visibility="{Binding ElementName=RISToggle, Path=IsOn, Converter={StaticResource BooleanToVisibilityConverter}}">

                                            <TextBox
                                                Height="31"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                HorizontalContentAlignment="Center"
                                                IsReadOnly="True"
                                                Text="{Binding Value, StringFormat={}{0:N0} %, ElementName=RISSlider, Mode=OneWay}" />

                                            <Slider
                                                x:Name="RISSlider"
                                                Margin="6,0,0,0"
                                                VerticalAlignment="Center"
                                                AutoToolTipPrecision="0"
                                                IsMoveToPointEnabled="True"
                                                IsSnapToTickEnabled="True"
                                                LargeChange="5"
                                                Maximum="100"
                                                Minimum="0"
                                                SmallChange="1"
                                                TickFrequency="5"
                                                TickPlacement="BottomRight"
                                                ToolTip="{Binding Value, StringFormat=N0, RelativeSource={RelativeSource Self}, Mode=OneWay}"
                                                ValueChanged="RISSlider_ValueChanged" />
                                        </DockPanel>
                                    </ikw:SimpleStackPanel>

                                    <!--  Separator  -->
                                    <Separator
                                        Margin="-46,0,-16,0"
                                        BorderBrush="{DynamicResource SystemControlBackgroundChromeMediumBrush}"
                                        BorderThickness="0,1,0,0" />

                                    <!--  Framerate Limit  -->
                                    <ikw:SimpleStackPanel
                                        Name="StackProfileFramerate"
                                        IsEnabled="False"
                                        Spacing="3">

                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="5*" />
                                                <ColumnDefinition Width="5*" />
                                            </Grid.ColumnDefinitions>

                                            <ikw:SimpleStackPanel VerticalAlignment="Center">
                                                <TextBlock Style="{StaticResource BodyTextBlockStyle}" Text="{l:Static resx:Resources.ProfilesPage_FramerateLimit}" />
                                                <TextBlock
                                                    Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"
                                                    Style="{StaticResource CaptionTextBlockStyle}"
                                                    Text="{l:Static resx:Resources.ProfilesPage_FramerateLimitDesc}"
                                                    TextWrapping="Wrap" />
                                            </ikw:SimpleStackPanel>

                                            <ComboBox
                                                Name="cB_Framerate"
                                                Grid.Column="1"
                                                Margin="12,0,0,0"
                                                HorizontalAlignment="Stretch"
                                                VerticalAlignment="Center"
                                                SelectionChanged="cB_Framerate_SelectionChanged" />
                                        </Grid>
                                    </ikw:SimpleStackPanel>

                                </ikw:SimpleStackPanel>
                            </Expander.Content>
                        </Expander>

                        <ui:SettingsExpander
                            d:IsExpanded="True"
                            Description="{l:Static resx:Resources.ProfilesPage_PowerPresetDesc}"
                            Header="{l:Static resx:Resources.ProfilesPage_PowerPreset}">
                            <ui:SettingsExpander.HeaderIcon>
                                <ui:FontIcon Glyph="&#xf5f7;" />
                            </ui:SettingsExpander.HeaderIcon>

                            <TextBlock
                                Name="SelectedPowerProfileName"
                                Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"
                                Style="{StaticResource BodyTextBlockStyle}"
                                Text="{l:Static resx:Resources.PowerProfileDefaultName}" />

                            <ui:SettingsExpander.Items>
                                <ui:SettingsCard>
                                    <!--  Bit hacky, improve me  -->
                                    <Grid Width="{Binding ActualWidth, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=ui:SettingsCard}}">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="46" />
                                            <ColumnDefinition Width="102" />
                                        </Grid.ColumnDefinitions>

                                        <ComboBox
                                            Name="PowerProfileOnBattery"
                                            HorizontalAlignment="Stretch"
                                            DisplayMemberPath="Text"
                                            ItemContainerStyle="{StaticResource {x:Type ComboBoxItem}}"
                                            ItemsSource="{Binding ProfilePickerCollectionViewDC, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                            SelectedIndex="{Binding SelectedPresetIndexDC, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                            SelectedValuePath="Text">
                                            <ComboBox.GroupStyle>
                                                <GroupStyle>
                                                    <GroupStyle.HeaderTemplate>
                                                        <DataTemplate>
                                                            <TextBlock
                                                                Margin="4,0,0,0"
                                                                Style="{StaticResource BaseTextBlockStyle}"
                                                                Text="{Binding Name, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}" />
                                                        </DataTemplate>
                                                    </GroupStyle.HeaderTemplate>
                                                </GroupStyle>
                                            </ComboBox.GroupStyle>
                                        </ComboBox>

                                        <Button
                                            Name="PowerProfileOnBatteryMore"
                                            Grid.Column="1"
                                            Width="40"
                                            Height="31"
                                            Margin="6,0,0,0"
                                            Click="PowerProfileOnBatteryMore_Click"
                                            Style="{DynamicResource AccentButtonStyle}"
                                            Tag="Navigation">
                                            <ui:FontIcon HorizontalAlignment="Center" Glyph="&#xE712;" />
                                        </Button>
                                    </Grid>
                                </ui:SettingsCard>
                            </ui:SettingsExpander.Items>
                        </ui:SettingsExpander>

                        <ui:SettingsExpander
                            d:IsExpanded="True"
                            Description="{l:Static resx:Resources.ProfilesPage_PowerPresetDesc}"
                            Header="{l:Static resx:Resources.ProfilesPage_PowerPresetPlugged}">

                            <ui:SettingsExpander.HeaderIcon>
                                <ui:FontIcon Glyph="&#xf602;" />
                            </ui:SettingsExpander.HeaderIcon>

                            <TextBlock
                                Name="SelectedPowerProfilePluggedName"
                                Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"
                                Style="{StaticResource BodyTextBlockStyle}"
                                Text="{l:Static resx:Resources.PowerProfileDefaultName}" />

                            <ui:SettingsExpander.Items>
                                <ui:SettingsCard>
                                    <Grid Width="{Binding ActualWidth, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=ui:SettingsCard}}">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="46" />
                                            <ColumnDefinition Width="102" />
                                        </Grid.ColumnDefinitions>

                                        <ComboBox
                                            Name="PowerProfilePlugged"
                                            HorizontalAlignment="Stretch"
                                            DisplayMemberPath="Text"
                                            ItemContainerStyle="{StaticResource {x:Type ComboBoxItem}}"
                                            ItemsSource="{Binding ProfilePickerCollectionViewAC, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                            SelectedIndex="{Binding SelectedPresetIndexAC, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                            SelectedValuePath="Text">
                                            <ComboBox.GroupStyle>
                                                <GroupStyle>
                                                    <GroupStyle.HeaderTemplate>
                                                        <DataTemplate>
                                                            <TextBlock
                                                                Margin="4,0,0,0"
                                                                Style="{StaticResource BaseTextBlockStyle}"
                                                                Text="{Binding Name, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}" />
                                                        </DataTemplate>
                                                    </GroupStyle.HeaderTemplate>
                                                </GroupStyle>
                                            </ComboBox.GroupStyle>
                                        </ComboBox>

                                        <Button
                                            Name="PowerProfilePluggedMore"
                                            Grid.Column="1"
                                            Width="40"
                                            Height="31"
                                            HorizontalAlignment="Right"
                                            Click="PowerProfilePluggedMore_Click"
                                            Style="{DynamicResource AccentButtonStyle}"
                                            Tag="Navigation">
                                            <ui:FontIcon HorizontalAlignment="Center" Glyph="&#xE712;" />
                                        </Button>
                                    </Grid>
                                </ui:SettingsCard>
                            </ui:SettingsExpander.Items>
                        </ui:SettingsExpander>

                        <!--  Motion control settings  -->
                        <Expander
                            Name="MotionSettings"
                            HorizontalAlignment="Stretch"
                            Expanded="Expander_Expanded">
                            <Expander.Header>
                                <DockPanel Margin="0,12,12,12">
                                    <ui:FontIcon
                                        Height="40"
                                        HorizontalAlignment="Center"
                                        FontFamily="{DynamicResource SymbolThemeFontFamily}"
                                        Glyph="&#xE8B4;" />

                                    <ikw:SimpleStackPanel Margin="12,0,0,0" VerticalAlignment="Center">
                                        <TextBlock Style="{StaticResource BodyTextBlockStyle}" Text="{l:Static resx:Resources.ProfilesPage_MotionControlSettings}" />
                                        <TextBlock
                                            Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"
                                            Style="{StaticResource CaptionTextBlockStyle}"
                                            Text="{l:Static resx:Resources.ProfilesPage_MotionControlSettingsDesc}"
                                            TextWrapping="Wrap" />
                                    </ikw:SimpleStackPanel>
                                </DockPanel>
                            </Expander.Header>

                            <Expander.Content>
                                <Grid FlowDirection="LeftToRight">
                                    <ikw:SimpleStackPanel Margin="30,0,0,0" Spacing="12">

                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="5*" MinWidth="200" />
                                                <ColumnDefinition Width="5*" MinWidth="200" />
                                            </Grid.ColumnDefinitions>

                                            <StackPanel Orientation="Vertical">
                                                <TextBlock Style="{StaticResource BodyTextBlockStyle}" Text="{l:Static resx:Resources.ProfilesPage_GyrometerMultiplier}" />
                                                <TextBlock
                                                    Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"
                                                    Style="{StaticResource CaptionTextBlockStyle}"
                                                    Text="{l:Static resx:Resources.ProfilesPage_GyrometerMultiplierDesc}"
                                                    TextWrapping="Wrap" />
                                            </StackPanel>

                                            <DockPanel Grid.Column="1" Margin="12,0,0,0">
                                                <TextBox
                                                    Height="31"
                                                    HorizontalAlignment="Right"
                                                    VerticalAlignment="Center"
                                                    HorizontalContentAlignment="Center"
                                                    IsReadOnly="True"
                                                    Text="{Binding Value, StringFormat={}{0:N1}, ElementName=tb_ProfileGyroValue, Mode=OneWay}" />
                                                <Slider
                                                    x:Name="tb_ProfileGyroValue"
                                                    Margin="6,0,0,0"
                                                    VerticalAlignment="Center"
                                                    AutoToolTipPrecision="1"
                                                    IsMoveToPointEnabled="True"
                                                    IsSnapToTickEnabled="True"
                                                    Maximum="3"
                                                    Minimum="0.1"
                                                    TickFrequency="0.1"
                                                    TickPlacement="BottomRight"
                                                    ToolTip="{Binding Value, StringFormat=N1, RelativeSource={RelativeSource Self}, Mode=OneWay}"
                                                    ValueChanged="tb_ProfileGyroValue_ValueChanged"
                                                    Value="10" />
                                            </DockPanel>
                                        </Grid>

                                        <!--  Separator  -->
                                        <Separator
                                            Margin="-46,0,-16,0"
                                            BorderBrush="{DynamicResource SystemControlBackgroundChromeMediumBrush}"
                                            BorderThickness="0,1,0,0" />

                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="5*" MinWidth="200" />
                                                <ColumnDefinition Width="5*" MinWidth="200" />
                                            </Grid.ColumnDefinitions>

                                            <StackPanel Orientation="Vertical">
                                                <TextBlock Style="{StaticResource BodyTextBlockStyle}" Text="{l:Static resx:Resources.ProfilesPage_AccelerometerMultiplier}" />
                                                <TextBlock
                                                    Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"
                                                    Style="{StaticResource CaptionTextBlockStyle}"
                                                    Text="{l:Static resx:Resources.ProfilesPage_AccelerometerMultiplierDesc}"
                                                    TextWrapping="Wrap" />
                                            </StackPanel>

                                            <DockPanel Grid.Column="1" Margin="12,0,0,0">
                                                <TextBox
                                                    Height="31"
                                                    HorizontalAlignment="Right"
                                                    VerticalAlignment="Center"
                                                    HorizontalContentAlignment="Center"
                                                    IsReadOnly="True"
                                                    Text="{Binding Value, StringFormat={}{0:N1}, ElementName=tb_ProfileAcceleroValue, Mode=OneWay}" />
                                                <Slider
                                                    x:Name="tb_ProfileAcceleroValue"
                                                    Margin="6,0,0,0"
                                                    VerticalAlignment="Center"
                                                    AutoToolTipPrecision="1"
                                                    IsMoveToPointEnabled="True"
                                                    IsSnapToTickEnabled="True"
                                                    LargeChange="1"
                                                    Maximum="3"
                                                    Minimum="0.1"
                                                    TickFrequency="0.1"
                                                    TickPlacement="BottomRight"
                                                    ToolTip="{Binding Value, StringFormat=N1, RelativeSource={RelativeSource Self}, Mode=OneWay}"
                                                    ValueChanged="tb_ProfileAcceleroValue_ValueChanged"
                                                    Value="10" />
                                            </DockPanel>
                                        </Grid>

                                        <!--  Separator  -->
                                        <Separator
                                            Margin="-46,0,-16,0"
                                            BorderBrush="{DynamicResource SystemControlBackgroundChromeMediumBrush}"
                                            BorderThickness="0,1,0,0" />

                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="5*" MinWidth="200" />
                                                <ColumnDefinition Width="5*" MinWidth="200" />
                                            </Grid.ColumnDefinitions>

                                            <StackPanel Orientation="Vertical">
                                                <TextBlock Style="{StaticResource BodyTextBlockStyle}" Text="{l:Static resx:Resources.ProfilesPage_GyroSteeringAxis}" />
                                                <TextBlock
                                                    Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"
                                                    Style="{StaticResource CaptionTextBlockStyle}"
                                                    Text="{l:Static resx:Resources.ProfilesPage_GyroSteeringAxisDesc}"
                                                    TextWrapping="Wrap" />
                                            </StackPanel>

                                            <ComboBox
                                                Name="cB_GyroSteering"
                                                Grid.Column="1"
                                                Margin="12,0,0,0"
                                                HorizontalAlignment="Stretch"
                                                VerticalAlignment="Center"
                                                HorizontalContentAlignment="Left"
                                                SelectionChanged="cB_GyroSteering_SelectionChanged">
                                                <ComboBoxItem>
                                                    <ikw:SimpleStackPanel Orientation="Horizontal" Spacing="3">
                                                        <ui:FontIcon Glyph="&#xE8B4;" />
                                                        <Label Content="{l:Static resx:Resources.ProfilesPage_Yaw}" />
                                                    </ikw:SimpleStackPanel>
                                                </ComboBoxItem>
                                                <ComboBoxItem>
                                                    <ikw:SimpleStackPanel Orientation="Horizontal" Spacing="3">
                                                        <ui:FontIcon Glyph="&#xE8B4;" />
                                                        <Label Content="{l:Static resx:Resources.ProfilesPage_Roll}" />
                                                    </ikw:SimpleStackPanel>
                                                </ComboBoxItem>
                                                <ComboBoxItem>
                                                    <ikw:SimpleStackPanel Orientation="Horizontal" Spacing="3">
                                                        <ui:FontIcon Glyph="&#xE8B4;" />
                                                        <Label Content="{l:Static resx:Resources.ProfilesPage_RollYawAuto}" />
                                                    </ikw:SimpleStackPanel>
                                                </ComboBoxItem>
                                            </ComboBox>
                                        </Grid>

                                        <!--  Separator  -->
                                        <Separator
                                            Margin="-46,0,-16,0"
                                            BorderBrush="{DynamicResource SystemControlBackgroundChromeMediumBrush}"
                                            BorderThickness="0,1,0,0" />

                                        <CheckBox
                                            Name="cB_InvertHorizontal"
                                            Checked="cB_InvertHorizontal_Checked"
                                            Content="{l:Static resx:Resources.ProfilesPage_InvertHorizontalAxis}"
                                            Unchecked="cB_InvertHorizontal_Checked" />

                                        <!--  Separator  -->
                                        <Separator
                                            Margin="-46,0,-16,0"
                                            BorderBrush="{DynamicResource SystemControlBackgroundChromeMediumBrush}"
                                            BorderThickness="0,1,0,0" />

                                        <CheckBox
                                            Name="cB_InvertVertical"
                                            Checked="cB_InvertVertical_Checked"
                                            Content="{l:Static resx:Resources.ProfilesPage_InvertVerticalAxis}"
                                            Unchecked="cB_InvertVertical_Checked" />

                                        <!--  Separator  -->
                                        <Separator
                                            Margin="-46,0,-16,0"
                                            BorderBrush="{DynamicResource SystemControlBackgroundChromeMediumBrush}"
                                            BorderThickness="0,1,0,0" />

                                        <Grid>
                                            <Button
                                                Name="MotionControlAdditional"
                                                HorizontalAlignment="Stretch"
                                                Click="b_AdditionalSettings_Click"
                                                Content="{l:Static resx:Resources.ProfilesPage_AdditionalSettings}"
                                                Tag="Navigation" />
                                        </Grid>
                                    </ikw:SimpleStackPanel>
                                </Grid>
                            </Expander.Content>
                        </Expander>
                    </ikw:SimpleStackPanel>

                    <!--  Window settings  -->
                    <TextBlock Style="{StaticResource BaseTextBlockStyle}" Text="Windows settings" />
                    <ikw:SimpleStackPanel Spacing="3">
                        <ui:SettingsCard Description="Pauses the active game or foreground application whenever the QuickTools sidebar is displayed." Header="Suspend on overlay">
                            <ui:SettingsCard.HeaderIcon>
                                <ui:FontIcon Glyph="&#xe769;" />
                            </ui:SettingsCard.HeaderIcon>

                            <ui:ToggleSwitch Name="Toggle_SuspendOnQuicktools" Toggled="Toggle_SuspendOnQuicktools_Toggled" />
                        </ui:SettingsCard>

                        <ui:SettingsExpander
                            Description="Manage windows associated with profile"
                            Header="Windows settings"
                            IsEnabled="{Binding HasWindows, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                            IsExpanded="{Binding HasWindows, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                            ItemsSource="{Binding ProfileWindows}">
                            <ui:SettingsExpander.HeaderIcon>
                                <ui:FontIcon Glyph="&#xf7ed;" />
                            </ui:SettingsExpander.HeaderIcon>

                            <ui:SettingsExpander.ItemTemplate>
                                <DataTemplate>
                                    <ui:SettingsCard Header="{Binding Name, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}">
                                        <ikw:SimpleStackPanel
                                            HorizontalAlignment="Right"
                                            Orientation="Horizontal"
                                            Spacing="3">

                                            <ComboBox SelectedIndex="{Binding TargetDisplay, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                                                <ComboBoxItem>Current</ComboBoxItem>
                                                <ComboBoxItem IsEnabled="{Binding HasDisplay1, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}">\\.\DISPLAY1</ComboBoxItem>
                                                <ComboBoxItem IsEnabled="{Binding HasDisplay2, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}">\\.\DISPLAY2</ComboBoxItem>
                                                <ComboBoxItem IsEnabled="{Binding HasDisplay3, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}">\\.\DISPLAY3</ComboBoxItem>
                                                <ComboBoxItem IsEnabled="{Binding HasDisplay4, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}">\\.\DISPLAY4</ComboBoxItem>
                                            </ComboBox>

                                            <ComboBox SelectedIndex="{Binding TargetWindowPosition, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                                                <ComboBoxItem>Center</ComboBoxItem>
                                                <ComboBoxItem>Left</ComboBoxItem>
                                                <ComboBoxItem>Top</ComboBoxItem>
                                                <ComboBoxItem>Right</ComboBoxItem>
                                                <ComboBoxItem>Bottom</ComboBoxItem>
                                                <ComboBoxItem>TopLeft</ComboBoxItem>
                                                <ComboBoxItem>TopRight</ComboBoxItem>
                                                <ComboBoxItem>BottomRight</ComboBoxItem>
                                                <ComboBoxItem>BottomLeft</ComboBoxItem>
                                                <ComboBoxItem>Maximize</ComboBoxItem>
                                            </ComboBox>

                                            <CheckBox IsChecked="{Binding Borderless, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">Borderless</CheckBox>
                                        </ikw:SimpleStackPanel>
                                    </ui:SettingsCard>
                                </DataTemplate>
                            </ui:SettingsExpander.ItemTemplate>
                        </ui:SettingsExpander>
                    </ikw:SimpleStackPanel>

                    <!--  Compatibility settings  -->
                    <TextBlock Style="{StaticResource BaseTextBlockStyle}" Text="{l:Static resx:Resources.ProfilesPage_Compatibility}" />
                    <ikw:SimpleStackPanel Spacing="3">
                        <!--  Fullscreen optimizations  -->
                        <ui:SettingsCard Header="{l:Static resx:Resources.ProfilesPage_Compatibility_Fullscreen}">
                            <ui:SettingsCard.HeaderIcon>
                                <ui:FontIcon Glyph="&#xe740;" />
                            </ui:SettingsCard.HeaderIcon>

                            <ui:ToggleSwitch Name="UseFullscreenOptimizations" Toggled="UseFullscreenOptimizations_Toggled" />
                        </ui:SettingsCard>

                        <!--  High DPI awareness  -->
                        <ui:SettingsCard Header="{l:Static resx:Resources.ProfilesPage_Compatibility_HighDPI}">
                            <ui:SettingsCard.HeaderIcon>
                                <ui:FontIcon Glyph="&#xe799;" />
                            </ui:SettingsCard.HeaderIcon>

                            <ui:ToggleSwitch Name="UseHighDPIAwareness" Toggled="UseHighDPIAwareness_Toggled" />
                        </ui:SettingsCard>
                    </ikw:SimpleStackPanel>

                    <!--  Controller settings  -->
                    <TextBlock Style="{StaticResource BaseTextBlockStyle}" Text="{l:Static resx:Resources.ControllerPage_VirtualDeviceSettings}" />
                    <ikw:SimpleStackPanel Spacing="3">
                        <!--  Controller type  -->
                        <ui:SettingsCard Description="{l:Static resx:Resources.ProfilesPage_EmulatedControllerDesc}" Header="{l:Static resx:Resources.ProfilesPage_EmulatedController}">
                            <ui:SettingsCard.HeaderIcon>
                                <ui:FontIcon Glyph="&#xE7FC;" />
                            </ui:SettingsCard.HeaderIcon>

                            <ComboBox
                                x:Name="cB_EmulatedController"
                                SelectedIndex="0"
                                SelectionChanged="cB_EmulatedController_Changed">
                                <ComboBoxItem
                                    Name="cB_EmulatedController_disabled"
                                    Content="{l:Static resx:Resources.ProfilesPage_EmulatedControllerDefault}"
                                    Tag="-1" />
                                <ComboBoxItem
                                    Name="cB_EmulatedController_Xbox"
                                    Content="{l:Static resx:Resources.ProfilesPage_EmulatedControllerXbox}"
                                    Tag="0" />
                                <ComboBoxItem
                                    Name="cB_EmulatedController_DS4"
                                    Content="{l:Static resx:Resources.ProfilesPage_EmulatedControllerDS4}"
                                    Tag="1" />
                            </ComboBox>
                        </ui:SettingsCard>

                        <ui:SettingsCard
                            Click="ControllerSettingsButton_Click"
                            Description="{l:Static resx:Resources.ProfilesPage_ControllerLayoutDesc}"
                            Header="{l:Static resx:Resources.ProfilesPage_ControllerLayout}"
                            IsClickEnabled="True"
                            Tag="Navigation">
                            <ui:SettingsCard.HeaderIcon>
                                <ui:FontIcon Glyph="&#xE7FC;" />
                            </ui:SettingsCard.HeaderIcon>
                        </ui:SettingsCard>
                    </ikw:SimpleStackPanel>
                </ikw:SimpleStackPanel>
            </Border>
        </StackPanel>
    </Grid>
</Page>
